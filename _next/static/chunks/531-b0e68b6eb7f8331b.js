"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{39531:function(e,t,o){o.d(t,{Z:function(){return me}});var n=o(2784),r=o(46670),i=o(36888),s=o(64976),c=o(1503),a=o(52367),u=o(40489),l=o(35741),p=o(54707),m=o(13980),d=o.n(m),f=o(66208),h=o(18978),v=o(4466),g=o.n(v),j=o(22243),S=o(7913),E=o(52451),y=o.n(E);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},b.apply(this,arguments)}function w(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,D(e,t)}function D(e,t){return D=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},D(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}function R(e,t){var o="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(o)return(o=o.call(e)).next.bind(o);if(Array.isArray(e)||(o=function(e,t){if(e){if("string"===typeof e)return P(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?P(e,t):void 0}}(e))||t&&e&&"number"===typeof e.length){o&&(e=o);var n=0;return function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(e){var t=e.theme,o=void 0===t?{}:t,r=e.className,i=e.decoratedText,s=e.emojiInlineText,c=e.children;return n.createElement(s,{className:r,decoratedText:i,theme:o},c)}var T=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).mouseDown=!1,t.onMouseUp=function(){t.mouseDown&&(t.mouseDown=!1,t.props.onEmojiSelect(t.props.emoji))},t.onMouseDown=function(e){e.preventDefault(),t.mouseDown=!0},t.onMouseEnter=function(){t.props.onEmojiFocus(t.props.index)},t}w(t,e);var o=t.prototype;return o.componentDidUpdate=function(){this.mouseDown=!1},o.render=function(){var e=this.props,t=e.emoji,o=e.theme,r=void 0===o?{}:o,i=e.isFocused,s=e.id,c=e.emojiImage,a=i?r.emojiSuggestionsEntryFocused:r.emojiSuggestionsEntry;return n.createElement("div",{className:a,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,role:"option",id:s,"aria-selected":i?"true":void 0},n.createElement(c,{emoji:t,theme:r}),n.createElement("span",{className:r.emojiSuggestionsEntryText},this.props.emoji.shortname))},t}(n.Component);function k(e,t){var o=t.getAnchorKey(),n=t.getAnchorOffset()-1;return function(e,t){var o=String(e),n=Number(t)>>>0,r=o.slice(0,n+1).search(/\S+$/),i=o.slice(n).search(/\s/);return i<0?{word:o.slice(r),begin:r,end:o.length}:{word:o.slice(r,i+n),begin:r,end:i+n}}(e.getCurrentContent().getBlockForKey(o).getText(),n)}var I="INSERT",M="REPLACE";function A(e,t,o){void 0===o&&(o=I);var n,r=t.unicode,i=e.getCurrentContent(),s=i.createEntity("emoji","IMMUTABLE",{emojiUnicode:r}).getLastCreatedEntityKey(),a=e.getSelection(),u=0,l=0;switch(o){case I:var p=c.Modifier.removeRange(i,a,"backward"),m=p.getSelectionAfter();n=c.Modifier.insertText(p,m,r,void 0,s),u=m.getAnchorOffset();var d=m.getAnchorKey();l=i.getBlockForKey(d).getLength();break;case M:var f=k(e,a),h=f.begin,v=f.end,g=a.merge({anchorOffset:h,focusOffset:v});n=c.Modifier.replaceText(i,g,r,void 0,s),u=v;var j=g.getAnchorKey();l=i.getBlockForKey(j).getLength();break;default:throw new Error('Unidentified value of "mode"')}u===l&&(n=c.Modifier.insertText(n,n.getSelectionAfter()," "));var S=c.EditorState.push(e,n,"insert-fragment");return c.EditorState.forceSelection(S,n.getSelectionAfter())}function q(e){return e?"static"!==window.getComputedStyle(e).getPropertyValue("position")?e:q(e.parentElement):null}function x(e){var t,o=e.decoratorRect,n=e.popover,r=e.state,i=e.filteredEmojis,s=q(n.parentElement);if(s){var c=s.getBoundingClientRect();t={scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,left:o.left-c.left,top:o.top-c.top}}else t={scrollLeft:window.pageXOffset||document.documentElement.scrollLeft,scrollTop:window.pageYOffset||document.documentElement.scrollTop,left:o.left,top:o.top};var a,u,l=t.left+t.scrollLeft,p=t.top+t.scrollTop;return r.isActive&&(i.size>0?(a="scale(1)",u="all 0.25s cubic-bezier(.3,1.2,.2,1)"):(a="scale(0)",u="all 0.35s cubic-bezier(.3,1,.2,1)")),{left:l+"px",top:p+"px",transform:a,transformOrigin:"1em 0%",transition:u}}function B(e){var t=e.store,o=e.children,r=e.theme,i=e.popperOptions,s=void 0===i?{placement:"bottom-start"}:i,c=(0,n.useState)((function(){return(0,u.Z)(r.emojiSuggestions)})),a=c[0],p=c[1],m=(0,n.useState)(null),d=m[0],f=m[1],h=(0,l.D)(t.getReferenceElement(),d,s),v=h.styles,g=h.attributes;return(0,n.useEffect)((function(){requestAnimationFrame((function(){return p((0,u.Z)(r.emojiSuggestions))}))}),[r]),n.createElement("div",b({ref:f,style:v.popper},g.popper,{className:a,role:"listbox"}),o)}var F=(0,p.Z)((function(e){0})),N=["theme","ariaProps","callbacks","onClose","onOpen","onSearchChange","positionSuggestions","popperOptions","emojis","store","emojiImage"],G=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={isActive:!1,focusedOptionIndex:0},t.onEditorStateChange=function(e){var o=t.props.store.getAllSearches();if(0===o.size)return e;var n=function(){return t.props.store.resetEscapedSearch(),t.closeDropdown(),e},r=e.getSelection(),i=r.getAnchorKey(),s=r.getAnchorOffset();if(!r.isCollapsed()||!r.getHasFocus())return n();var c=o.map((function(e){return a.ZP.decodeOffsetKey(e)})).filter((function(e){return e.blockKey===i})).map((function(t){return e.getBlockTree(t.blockKey).getIn([t.decoratorKey,"leaves",t.leafKey])}));if(c.every((function(e){return void 0===e})))return n();var u=e.getCurrentContent().getPlainText(),l=c.filter((function(e){return void 0!==e})).map((function(e){var t=e.start,o=e.end;return 0===t&&1===s&&":"!==u.charAt(s)&&/(\s|^):[\w]*/.test(u)&&s<=o||s>t+1&&s<=o}));return l.every((function(e){return!1===e}))?n():(t.activeOffsetKey=l.filter((function(e){return!0===e})).keySeq().first(),t.onSearchChange(e,r),t.props.store.isEscaped(t.activeOffsetKey)||t.props.store.resetEscapedSearch(),t.state.isActive||t.props.store.isEscaped(t.activeOffsetKey)||t.openDropdown(),void 0!==t.lastSelectionIsInsideWord&&l.equals(t.lastSelectionIsInsideWord)||t.setState({focusedOptionIndex:0}),t.lastSelectionIsInsideWord=l,e)},t.onSearchChange=function(e,o){var n=k(e,o).word,r=n.substring(1,n.length);t.lastSearchValue!==r&&"function"===typeof t.props.onSearchChange&&(t.lastSearchValue=r,t.props.onSearchChange({value:r}))},t.onDownArrow=function(e){e.preventDefault();var o=t.state.focusedOptionIndex+1;t.onEmojiFocus(o>=t.filteredEmojis.size?0:o)},t.onTab=function(e){e.preventDefault(),t.commitSelection()},t.onUpArrow=function(e){if(e.preventDefault(),t.filteredEmojis&&t.filteredEmojis.size>0){var o=t.state.focusedOptionIndex-1;t.onEmojiFocus(Math.max(o,0))}},t.onEscape=function(e){e.preventDefault();var o=t.lastSelectionIsInsideWord.filter((function(e){return!0===e})).keySeq().first();t.props.store.escapeSearch(o),t.closeDropdown(),t.props.store.setEditorState(t.props.store.getEditorState())},t.onEmojiSelect=function(e){t.closeDropdown();var o=A(t.props.store.getEditorState(),e,M);t.props.store.setEditorState(o)},t.onEmojiFocus=function(e){var o="emoji-option-"+t.key+"-"+e;t.props.ariaProps.ariaActiveDescendantID=o,t.setState({focusedOptionIndex:e}),t.props.store.setEditorState(t.props.store.getEditorState())},t.getEmojisForFilter=function(){var e=t.props.store.getEditorState().getSelection(),o=k(t.props.store.getEditorState(),e).word,n=o.substring(1,o.length).toLowerCase(),r=t.props.emojis.filter((function(e){return!n||e.shortname.indexOf(n)>-1})),i=r.size<9?r.size:9;return r.setSize(i)},t.commitSelection=function(){return t.onEmojiSelect(t.filteredEmojis.get(t.state.focusedOptionIndex)),"handled"},t.openDropdown=function(){t.props.callbacks.handleReturn=t.commitSelection,t.props.callbacks.keyBindingFn=function(e){40===e.keyCode&&t.onDownArrow(e),38===e.keyCode&&t.onUpArrow(e),27===e.keyCode&&t.onEscape(e),9===e.keyCode&&t.onTab(e)};var e="emoji-option-"+t.key+"-"+t.state.focusedOptionIndex;t.props.ariaProps.ariaActiveDescendantID=e,t.props.ariaProps.ariaOwneeID="emojis-list-"+t.key,t.props.ariaProps.ariaHasPopup="true",t.props.ariaProps.ariaExpanded=!0,t.setState({isActive:!0}),t.props.onOpen&&t.props.onOpen()},t.closeDropdown=function(){t.props.callbacks.keyBindingFn=void 0,t.props.callbacks.handleReturn=void 0,t.props.ariaProps.ariaHasPopup="false",t.props.ariaProps.ariaExpanded=!1,t.props.ariaProps.ariaActiveDescendantID=void 0,t.props.ariaProps.ariaOwneeID=void 0,t.setState({isActive:!1}),t.props.onClose&&t.props.onClose()},t}w(t,e);var o=t.prototype;return o.UNSAFE_componentWillMount=function(){this.key=(0,c.genKey)(),this.props.callbacks.onChange=this.onEditorStateChange},o.componentDidUpdate=function(){if(this.popover&&this.filteredEmojis){var e=this.filteredEmojis.size;e>0&&this.state.focusedOptionIndex>=e&&this.setState({focusedOptionIndex:e-1}),e<=0&&this.closeDropdown();var t=this.props.store.getPortalClientRect(this.activeOffsetKey);if(t)for(var o=(this.props.positionSuggestions||x)({decoratorRect:t,props:this.props,state:this.state,filteredEmojis:this.filteredEmojis.map((function(e){return e.shortname})).toList(),popover:this.popover}),n=0,r=Object.entries(o);n<r.length;n++){var i=r[n],s=i[0],c=i[1];this.popover.style[s]=c}else this.closeDropdown()}},o.componentWillUnmount=function(){this.props.callbacks.onChange=void 0},o.render=function(){var e=this;if(!this.state.isActive)return null;this.filteredEmojis=this.getEmojisForFilter();var t=this.props,o=t.theme,r=void 0===o?{}:o;t.ariaProps,t.callbacks,t.onClose,t.onOpen,t.onSearchChange;var i=t.positionSuggestions,s=t.popperOptions;t.emojis,t.store;var c=t.emojiImage,a=function(e,t){if(null==e)return{};var o,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)o=i[n],t.indexOf(o)>=0||(r[o]=e[o]);return r}(t,N);return i?(F("The property `positionSuggestions` is deprecated and will be removed in @draft-js-plugins/emoji 5.0 . Use `popperOptions` instead"),n.createElement("div",b({},a,{className:r.emojiSuggestions,role:"listbox",id:"emojis-list-"+this.key,ref:function(t){e.popover=t}}),this.filteredEmojis.map((function(t,o){return n.createElement(T,{key:t.shortname,onEmojiSelect:e.onEmojiSelect,onEmojiFocus:e.onEmojiFocus,isFocused:e.state.focusedOptionIndex===o,emoji:t,index:o,id:"emoji-option-"+e.key+"-"+o,theme:r,emojiImage:c})})).toJS())):n.createElement(B,{store:this.props.store,popperOptions:s,theme:r},this.filteredEmojis.map((function(t,o){return n.createElement(T,{key:t.shortname,onEmojiSelect:e.onEmojiSelect,onEmojiFocus:e.onEmojiFocus,isFocused:e.state.focusedOptionIndex===o,emoji:t,index:o,id:"emoji-option-"+e.key+"-"+o,theme:r,emojiImage:c})})).toJS())},t}(n.Component);function L(e){var t=e.children,o=e.store,r=e.offsetKey,i=(0,n.useRef)(null),s=(0,n.useCallback)((function(){o.updatePortalClientRect(r,(function(){var e;return null==(e=i.current)?void 0:e.getBoundingClientRect()}))}),[o,r]);return(0,n.useEffect)((function(){return o.register(r),s(),o.setReferenceElement(i.current),o.setEditorState(o.getEditorState()),function(){o.unregister(r),o.setReferenceElement(null)}}),[s,o]),n.createElement("span",{ref:i},t)}var U=[{title:"People",icon:n.createElement(h.vtP,{style:{verticalAlign:""}}),categories:["people"]},{title:"Nature",icon:n.createElement(h.IHQ,{style:{verticalAlign:""}}),categories:["nature"]},{title:"Food & Drink",icon:n.createElement(h.yQ2,{style:{verticalAlign:""}}),categories:["food"]},{title:"Activity",icon:n.createElement(h.QDI,{style:{verticalAlign:""}}),categories:["activity"]},{title:"Travel & Places",icon:n.createElement(h.NqP,{style:{verticalAlign:""}}),categories:["travel"]},{title:"Objects",icon:n.createElement(h.Z3q,{style:{verticalAlign:""}}),categories:["objects"]},{title:"Symbols",icon:n.createElement(h.$0H,{style:{verticalAlign:""}}),categories:["symbols"]},{title:"Flags",icon:n.createElement(h.wQ2,{style:{verticalAlign:""}}),categories:["flags"]}];function K(e){return{shortname:v.shortnameLookup[e]||(0,v.toShort)(e),unicode:e}}var _=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={isFocused:!1},t._isMounted=!1,t.onMouseUp=function(){t.mouseDown&&(t.mouseDown=!1,t.props.onEmojiSelect(t.props.emoji))},t.onMouseDown=function(){t.mouseDown=!0,t.props.onEmojiMouseDown&&t.props.onEmojiMouseDown(O(t),t.props.toneSet||null)},t.onFocusOrHover=function(){t.props.checkMouseDown()||t.setState({isFocused:!0})},t.onBlur=function(){t.props.checkMouseDown()||t.setState({isFocused:!1})},t.deselect=function(){t._isMounted&&t.setState({isFocused:!1})},t.onKeyDown=function(e){"Enter"!==e.key&&" "!==e.key||t.props.onEmojiSelect(t.props.emoji)},t.mouseDown=t.props.mouseDown,t}w(t,e);var o=t.prototype;return o.componentDidMount=function(){this._isMounted=!0},o.componentWillUnmount=function(){this._isMounted=!1},o.render=function(){var e=this,t=this.props,o=t.theme,r=void 0===o?{}:o,i=t.emoji,s=t.emojiImage,c=this.state.isFocused;return n.createElement("button",{type:"button",className:c?r.emojiSelectPopoverEntryFocused:r.emojiSelectPopoverEntry,onMouseDown:this.onMouseDown,onMouseEnter:this.onFocusOrHover,onMouseLeave:this.onBlur,onFocus:this.onFocusOrHover,onBlur:this.onBlur,onMouseUp:this.onMouseUp,onKeyDown:this.onKeyDown,ref:function(t){e.button=t}},n.createElement(s,{emoji:i,theme:r}))},t}(n.Component);_.propTypes={theme:d().object.isRequired,emoji:d().object.isRequired,mouseDown:d().bool,checkMouseDown:d().func.isRequired,onEmojiSelect:d().func.isRequired,onEmojiMouseDown:d().func},_.defaultProps={mouseDown:!1};var H=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={hasRenderedEmoji:!1},t.shouldComponentUpdate=function(e){return!t.state.hasRenderedEmoji&&e.isActive},t.renderCategory=function(e){var o=t.props,r=o.theme,i=void 0===r?{}:r,s=o.emojis,c=o.checkMouseDown,a=o.onEmojiSelect,u=o.onEmojiMouseDown,l=o.emojiImage,p=o.isActive,m=s[e];return Object.keys(m).map((function(e){return n.createElement("li",{key:m[e][0].shortname,className:i.emojiSelectPopoverGroupItem},p&&n.createElement(_,{emoji:m[e][0],theme:i,toneSet:m[e].length>1?m[e]:null,checkMouseDown:c,onEmojiSelect:a,onEmojiMouseDown:u,emojiImage:l}))}))},t}w(t,e);var o=t.prototype;return o.componentDidUpdate=function(){this.props.isActive&&this.setState({hasRenderedEmoji:!0})},o.render=function(){var e=this,t=this.props,o=t.theme,r=void 0===o?{}:o,i=t.group;return n.createElement("section",{className:r.emojiSelectPopoverGroup,ref:function(t){e.container=t}},n.createElement("h3",{className:r.emojiSelectPopoverGroupTitle},i.title),n.createElement("ul",{className:r.emojiSelectPopoverGroupList,ref:function(t){e.list=t}},i.categories.map((function(t){return e.renderCategory(t)}))))},t}(n.Component);H.propTypes={theme:d().object.isRequired,group:d().object.isRequired,emojis:d().object.isRequired,checkMouseDown:d().func.isRequired,onEmojiSelect:d().func.isRequired,onEmojiMouseDown:d().func.isRequired,isActive:d().bool};var W=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={activeGroup:0},t.onScroll=function(e){var o=t.props,n=o.groups,r=o.onGroupScroll,i=0;n.forEach((function(o,n){e.scrollTop>=o.top&&(i=n,t.setState({activeGroup:i}))})),r(i)},t.onWheel=function(e){var o=t.scrollbars.getValues(),n=o.clientHeight,r=o.scrollHeight,i=o.scrollTop;e.deltaY>0?i<r-n-e.deltaY?e.stopPropagation():t.scrollbars.scrollToBottom():i>-e.deltaY?e.stopPropagation():t.scrollbars.scrollTop(0)},t.scrollToGroup=function(e){var o=t.props.groups;t.scrollbars.scrollTop(o[e].topList)},t.calculateBounds=function(){var e=t.scrollbars.getValues(),o=e.scrollHeight,n=e.scrollTop;if(o){var r=t.props.groups,i=t.container.getBoundingClientRect().top-n;r.forEach((function(e){var t=e.instance.container.getBoundingClientRect().top,o=e.instance.list.getBoundingClientRect().top;e.top=t-i,e.topList=o-i}))}},t.isRenderedGroupActive=function(e){var o=t.state.activeGroup,n=t.props.isOpen;return o===e||n&&o+1===e},t}w(t,e);var o=t.prototype;return o.componentDidMount=function(){this.calculateBounds()},o.componentDidUpdate=function(){this.calculateBounds()},o.render=function(){var e=this,t=this.props,o=t.theme,r=void 0===o?{}:o,i=t.groups,s=void 0===i?[]:i,c=t.emojis,a=t.checkMouseDown,u=t.onEmojiSelect,l=t.onEmojiMouseDown,p=t.emojiImage;return n.createElement("div",{className:r.emojiSelectPopoverGroups,onWheel:this.onWheel,ref:function(t){e.container=t}},n.createElement(S.$B,{className:r.emojiSelectPopoverScrollbarOuter,onScrollFrame:this.onScroll,renderTrackVertical:function(){return n.createElement("div",{className:r.emojiSelectPopoverScrollbar})},renderThumbVertical:function(e){return n.createElement("div",b({},e,{className:r.emojiSelectPopoverScrollbarThumb}))},ref:function(t){e.scrollbars=t}},s.map((function(t,o){return n.createElement(H,{key:"group#"+o+"["+t.categories.join(",")+"]",theme:r,group:t,emojis:c,checkMouseDown:a,onEmojiSelect:u,onEmojiMouseDown:l,ref:function(e){t.instance=e},emojiImage:p,isActive:e.isRenderedGroupActive(o)})}))))},t}(n.Component);W.propTypes={theme:d().object.isRequired,groups:d().arrayOf(d().object).isRequired,emojis:d().object.isRequired,checkMouseDown:d().func.isRequired,onEmojiSelect:d().func.isRequired,onEmojiMouseDown:d().func.isRequired,onGroupScroll:d().func.isRequired,isOpen:d().bool};var z=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).mouseDown=!1,t.onMouseDown=function(){t.mouseDown=!0},t.onMouseUp=function(){t.mouseDown&&(t.mouseDown=!1,t.props.onGroupSelect(t.props.groupIndex))},t}return w(t,e),t.prototype.render=function(){var e=this.props,t=e.theme,o=void 0===t?{}:t,r=e.icon,i=e.isActive;return n.createElement("button",{className:i?o.emojiSelectPopoverNavEntryActive:o.emojiSelectPopoverNavEntry,onMouseDown:this.onMouseDown,type:"button",onMouseUp:this.onMouseUp},r)},t}(n.Component);z.propTypes={theme:d().object.isRequired,icon:d().oneOfType([d().element,d().string]).isRequired,groupIndex:d().number.isRequired,isActive:d().bool,onGroupSelect:d().func.isRequired},z.defaultProps={isActive:!1};var Z=function(e){var t=e.theme,o=void 0===t?{}:t,r=e.groups,i=e.activeGroup,s=e.onGroupSelect;return n.createElement("ul",{className:o.emojiSelectPopoverNav},r.map((function(e,t){return n.createElement("li",{key:"nav-group#"+t+"["+e.categories.join(",")+"]",className:o.emojiSelectPopoverNavItem},n.createElement(z,{theme:o,groupIndex:t,isActive:t===i,icon:e.icon,onGroupSelect:s}))})))};Z.propTypes={theme:d().object.isRequired,groups:d().arrayOf(d().object).isRequired,activeGroup:d().number.isRequired,onGroupSelect:d().func.isRequired};var V=Z,$=function(e){function t(){for(var t,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).setCorrectPosition=function(e,o){var n=t.tones.offsetWidth,r=t.tones.offsetHeight,i={marginLeft:0,left:o.left+o.width/2-n/2,bottom:o.bottom+o.height};i.left<e.left?(delete i.marginLeft,i.left=e.left):i.left>e.left+e.width-n&&(delete i.marginLeft,delete i.left,i.right=e.right),i.bottom>e.bottom+e.height-r&&(delete i.bottom,i.top=o.top+o.height),i=y().object(i);for(var s=0,c=Object.entries(i);s<c.length;s++){var a=c[s],u=a[0],l=a[1];t.tones.style[u]=l}},t}w(t,e);var o=t.prototype;return o.componentDidMount=function(){var e=this.props.bounds,t=e.areaBounds,o=e.entryBounds;this.setCorrectPosition(t,o)},o.render=function(){var e=this,t=this.props,o=t.theme,r=void 0===o?{}:o,i=t.toneSet,s=void 0===i?[]:i,c=t.onEmojiSelect,a=t.emojiImage;return n.createElement("div",{className:r.emojiSelectPopoverToneSelect},n.createElement("ul",{className:r.emojiSelectPopoverToneSelectList,ref:function(t){e.tones=t}},(s||[]).map((function(e){return n.createElement("li",{key:"tone-select("+e+")",className:r.emojiSelectPopoverToneSelectItem},n.createElement(_,{emoji:e,theme:r,checkMouseDown:function(){return!1},onEmojiSelect:c,mouseDown:!0,emojiImage:a}))}))))},t}(n.Component);$.propTypes={theme:d().object.isRequired,bounds:d().shape({areaBounds:d().shape({left:d().number.isRequired,right:d().number.isRequired,top:d().number.isRequired,bottom:d().number.isRequired,width:d().number.isRequired,height:d().number.isRequired}).isRequired,entryBounds:d().shape({left:d().number.isRequired,right:d().number.isRequired,top:d().number.isRequired,bottom:d().number.isRequired,width:d().number.isRequired,height:d().number.isRequired}).isRequired}).isRequired,onEmojiSelect:d().func.isRequired};var Q=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).activeEmoji=null,t.toneSelectTimer=null,t.mouseDown=!1,t.toneSet=null,t.state={activeGroup:0,showToneSelect:!1},t.onMouseDown=function(){t.mouseDown=!0},t.onMouseUp=function(){t.mouseDown=!1,t.activeEmoji&&(t.activeEmoji.deselect(),t.activeEmoji=null,t.state.showToneSelect?t.closeToneSelect():t.toneSelectTimer&&(clearTimeout(t.toneSelectTimer),t.toneSelectTimer=null))},t.onEmojiSelect=function(e){var o=A(t.props.store.getEditorState(),e);t.props.store.setEditorState(o),t.props.onEmojiSelect()},t.onEmojiMouseDown=function(e,o){t.activeEmoji=e,o&&t.openToneSelectWithTimer(o)},t.onGroupSelect=function(e){t.groupsElement.scrollToGroup(e)},t.onGroupScroll=function(e){e!==t.state.activeGroup&&t.setState({activeGroup:e})},t.openToneSelectWithTimer=function(e){t.toneSelectTimer=setTimeout((function(){t.toneSelectTimer=null,t.openToneSelect(e)}),t.props.toneSelectOpenDelay)},t.openToneSelect=function(e){t.toneSet=e,t.setState({showToneSelect:!0})},t.closeToneSelect=function(){t.toneSet=[],t.setState({showToneSelect:!1})},t.checkMouseDown=function(){return t.mouseDown},t.renderToneSelect=function(){if(t.state.showToneSelect){var e=t.props,o=e.theme,r=void 0===o?{}:o,i=e.emojiImage,s=t.container.getBoundingClientRect(),c=t.groupsElement.container.getBoundingClientRect(),a=t.activeEmoji.button.getBoundingClientRect(),u={areaBounds:{left:c.left-s.left,right:s.right-c.right,top:c.top-s.top,bottom:s.bottom-c.bottom,width:c.width,height:c.width},entryBounds:{left:a.left-s.left,right:s.right-a.right,top:a.top-s.top,bottom:s.bottom-a.bottom,width:a.width,height:a.width}};return n.createElement($,{theme:r,bounds:u,toneSet:t.toneSet,onEmojiSelect:t.onEmojiSelect,emojiImage:i})}return null},t.renderMenu=function(e){var o=t.props,r=o.menuPosition,i=o.theme,s=void 0===i?{}:i,c=o.groups,a=void 0===c?[]:c,u=t.state.activeGroup;return e===(r||"bottom")?n.createElement(V,{theme:s,groups:a,activeGroup:u,onGroupSelect:t.onGroupSelect}):null},t}w(t,e);var o=t.prototype;return o.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp)},o.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp)},o.render=function(){var e=this,t=this.props,o=t.theme,r=void 0===o?{}:o,i=t.groups,s=void 0===i?[]:i,c=t.emojis,a=t.isOpen,u=void 0!==a&&a,l=t.emojiImage,p=u?r.emojiSelectPopover:r.emojiSelectPopoverClosed,m=this.state.activeGroup;return n.createElement("div",{className:p,onMouseDown:this.onMouseDown,ref:function(t){e.container=t,e.props.setPopperRef(e.container)}},u&&n.createElement(n.Fragment,null,n.createElement("h3",{className:r.emojiSelectPopoverTitle},s[m].title),this.renderMenu("top"),n.createElement(W,{theme:r,groups:s,emojis:c,checkMouseDown:this.checkMouseDown,onEmojiSelect:this.onEmojiSelect,onEmojiMouseDown:this.onEmojiMouseDown,onGroupScroll:this.onGroupScroll,ref:function(t){e.groupsElement=t},emojiImage:l,isOpen:u}),this.renderMenu("bottom"),this.renderToneSelect()))},t}(n.Component);Q.propTypes={theme:d().object.isRequired,store:d().object.isRequired,groups:d().arrayOf(d().object).isRequired,emojis:d().object.isRequired,toneSelectOpenDelay:d().number.isRequired,isOpen:d().bool,menuPosition:d().oneOf(["top","bottom"])},Q.defaultProps={isOpen:!1};var Y=function(){for(var e,t,o={},n=R(j);!(e=n()).done;){var r=e.value,i=K(r.unicode),s=v.emojiList[(t=i.shortname,t.replace(/[^ -~]+/g,""))];if(s&&(o[s.category]||(o[s.category]={}),o[s.category][i.shortname]=[i],r.skins))for(var c,a=R(r.skins);!(c=a()).done;){var u=K(c.value.unicode);v.emojiList[u.shortname]&&o[s.category][i.shortname].push(u)}}return o}(),J=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isOpen:!1},t.emojiSelectRef=n.createRef(),t.buttonRef=n.createRef(),t.popoverContainer=null,t.popperInstance=null,t.onButtonClick=function(){return t.state.isOpen?t.closePopover():t.openPopover()},t.openPopover=function(){t.state.isOpen||t.setState({isOpen:!0}),t.props.onOpen&&t.props.onOpen(),t.buttonRef.current&&t.popoverContainer&&(t.popperInstance=(0,f.fi)(t.buttonRef.current,t.popoverContainer,t.props.popperOptions))},t.closePopover=function(){var e;t.state.isOpen&&t.setState({isOpen:!1}),t.props.onClose&&t.props.onClose(),null==(e=t.popperInstance)||e.destroy(),t.popperInstance=null},t.closeIfClickedOutside=function(e){t.emojiSelectRef.current&&e.target instanceof Element&&!t.emojiSelectRef.current.contains(e.target)&&t.closePopover()},t}w(t,e);var o=t.prototype;return o.componentDidMount=function(){document.addEventListener("click",this.closeIfClickedOutside)},o.componentWillUnmount=function(){document.removeEventListener("click",this.closeIfClickedOutside)},o.render=function(){var e=this,t=this.props,o=t.theme,r=void 0===o?{}:o,i=t.store,s=t.selectGroups,c=t.selectButtonContent,a=t.toneSelectOpenDelay,u=t.emojiImage,l=t.closeOnEmojiSelect,p=t.menuPosition,m=this.state.isOpen?r.emojiSelectButtonPressed:r.emojiSelectButton;return n.createElement("div",{className:r.emojiSelect,ref:this.emojiSelectRef},n.createElement("button",{ref:this.buttonRef,className:m,onClick:this.onButtonClick,type:"button"},c),n.createElement(Q,{setPopperRef:function(t){e.popoverContainer=t},theme:r,store:i,groups:s,emojis:Y,toneSelectOpenDelay:a,isOpen:this.state.isOpen,emojiImage:u,menuPosition:p,onEmojiSelect:function(){l&&e.closePopover()}}))},t}(n.Component);J.propTypes={theme:d().object.isRequired,store:d().object.isRequired,selectGroups:d().arrayOf(d().shape({title:d().string.isRequired,icon:d().oneOfType([d().element,d().string]).isRequired,categories:d().arrayOf(d().oneOf(Object.keys(Y))).isRequired})),selectButtonContent:d().oneOfType([d().element,d().string]),toneSelectOpenDelay:d().number,menuPosition:d().oneOf(["top","bottom"]),popperOptions:d().object},J.defaultProps={selectButtonContent:"\u263a",selectGroups:U,toneSelectOpenDelay:500,popperOptions:{placement:"bottom-start",modifiers:[{name:"offset",options:{offset:[0,10]}}]}};var X=g().escapeRegExp(g().unicodeCharRegex()),ee=new RegExp("<object[^>]*>.*?</object>|<span[^>]*>.*?</span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|("+X+")","gi"),te=function(e,t){(0,a.$m)(ee,e,t)},oe=/(\s|^):[\w]*:?/g,ne=function(e,t){(0,a.$m)(oe,e,t)},re=new RegExp(g().regAscii,"g");var ie={setPriorityList:function(e){this.list=function(e){var t={};for(var o in g().emojiList)e.hasOwnProperty(o)||(t[o]=[{shortname:o,unicode:g().convert(g().emojiList[o].uc_full)}]);var n=Object.entries(e).reduce((function(e,t){var o,n=t[0],r=t[1];return b({},e,((o={})[n]=r.map((function(e){return{shortname:n,unicode:g().convert(e)}})),o))}),{});return b({},n,t)}(e)},list:{}};ie.setPriorityList({":thumbsup:":["1f44d"],":smile:":["1f604"],":heart:":["2764-fe0f"],":ok_hand:":["1f44c"],":joy:":["1f602"],":tada:":["1f389"],":see_no_evil:":["1f648"],":raised_hands:":["1f64c"],":100:":["1f4af"]});var se=ie,ce={emoji:"e1g1wugw",emojiSuggestions:"esyutjr",emojiSuggestionsEntry:"e1eijkox",emojiSuggestionsEntryFocused:"e1adbvmt",emojiSuggestionsEntryText:"e13wg9oj",emojiSuggestionsEntryIcon:"e1w5jrn9",emojiSelect:"e183m4hm",emojiSelectButton:"e8k2yoa",emojiSelectButtonPressed:"e13wqaj6",emojiSelectPopoverScrollbarOuter:"ec6zxdw",emojiSelectPopover:"ejr02pv",emojiSelectPopoverClosed:"e6amujp",emojiSelectPopoverTitle:"e16zneum",emojiSelectPopoverGroups:"e1kg9q3n",emojiSelectPopoverGroup:"e1m341vm",emojiSelectPopoverGroupTitle:"e19xmvdb",emojiSelectPopoverGroupList:"e13arc1",emojiSelectPopoverGroupItem:"e6nwac2",emojiSelectPopoverToneSelect:"e3h4qvg",emojiSelectPopoverToneSelectList:"e1129lxj",emojiSelectPopoverToneSelectItem:"eug7aee",emojiSelectPopoverEntry:"eyoq5wq",emojiSelectPopoverEntryFocused:"e1eigyu0",emojiSelectPopoverEntryIcon:"e11mkpma",emojiSelectPopoverNav:"e1cibj9i",emojiSelectPopoverNavItem:"e2bpndj",emojiSelectPopoverNavEntry:"e1qma4nk",emojiSelectPopoverNavEntryActive:"e1q5rpho",emojiSelectPopoverScrollbar:"e17si09n",emojiSelectPopoverScrollbarThumb:"e1duapnp"};function ae(e){var t,o=e.emoji,r=e.theme,i=(0,v.toImage)(o.shortname),s=null==(t=/src="(.*)"/.exec(i))?void 0:t[1];return n.createElement("img",{src:s,className:r.emojiSelectPopoverEntryIcon,title:o.shortname,draggable:!1,role:"presentation"})}function ue(e){var t=e.emoji;return n.createElement("span",{title:t.shortname},t.unicode)}function le(e){var t=e.decoratedText,o=e.children;return n.createElement("span",{title:(0,v.toShort)(t)},o)}function pe(e){var t,o=e.decoratedText,r=e.theme,i=e.children,s=e.className,c=(0,v.toShort)(o),a=(0,v.shortnameToImage)(c),l=null==(t=/src="(.*)"/.exec(a))?void 0:t[1];if(!l)return n.createElement(le,{decoratedText:o,theme:r},i);var p="url("+l+")",m=(0,u.Z)(r.emoji,s);return n.createElement("span",{className:m,title:c,style:{backgroundImage:p}},i)}var me=function(e){void 0===e&&(e={});var t,o,u={keyBindingFn:void 0,handleKeyCommand:void 0,handleReturn:void 0,onChange:void 0},l={ariaHasPopup:"false",ariaExpanded:!1,ariaOwneeID:void 0,ariaActiveDescendantID:void 0},p=(0,r.Map)(),m=(0,r.Map)(),d={getEditorState:void 0,setEditorState:void 0,getPortalClientRect:function(e){var t;return null==(t=m.get(e))?void 0:t()},getAllSearches:function(){return p},isEscaped:function(e){return t===e},escapeSearch:function(e){t=e},resetEscapedSearch:function(){t=void 0},register:function(e){p=p.set(e,e)},updatePortalClientRect:function(e,t){m=m.set(e,t)},unregister:function(e){p=p.delete(e),m=m.delete(e)},getReferenceElement:function(){return o},setReferenceElement:function(e){o=e}},f=e,h=f.theme,v=void 0===h?ce:h,g=f.positionSuggestions,j=f.priorityList,S=f.selectGroups,E=f.selectButtonContent,y=f.toneSelectOpenDelay,w=f.useNativeArt,D=f.disableInlineEmojis,O=f.emojiImage,P=void 0===O?w?ue:ae:O,R=f.emojiInlineText,T=void 0===R?w?le:pe:R,k=f.suggestionsPopperOptions,I=f.selectPopperOptions;j&&se.setPriorityList(j);var M={ariaProps:l,callbacks:u,theme:v,store:d,positionSuggestions:g,emojis:(0,r.List)((0,i.Z)((0,s.Z)(se.list))),emojiImage:P,popperOptions:k},A={theme:v,store:d,selectGroups:S,selectButtonContent:E,toneSelectOpenDelay:y,emojiImage:P,popperOptions:I};return{EmojiSuggestions:function(e){return n.createElement(G,b({},e,M))},EmojiSelect:function(e){return n.createElement(J,b({},e,A))},decorators:D?[]:[{strategy:te,component:function(e){return n.createElement(C,b({},e,{theme:v,emojiInlineText:T}))}},{strategy:ne,component:function(e){return n.createElement(L,b({},e,{store:d}))}}],getAccessibilityProps:function(){return{role:"combobox",ariaAutoComplete:"list",ariaHasPopup:l.ariaHasPopup,ariaExpanded:l.ariaExpanded,ariaActiveDescendantID:l.ariaActiveDescendantID,ariaOwneeID:l.ariaOwneeID}},initialize:function(e){var t=e.getEditorState,o=e.setEditorState;d.getEditorState=t,d.setEditorState=o},keyBindingFn:function(e){return u.keyBindingFn&&u.keyBindingFn(e)},handleReturn:function(e){return u.handleReturn&&u.handleReturn(e)},onChange:function(e){var t=function(e){var t=e.getCurrentContent(),o=t.getBlockMap(),n=t;return o.forEach((function(e){if(e){var t=e.getText();(0,a.$m)(re,e,(function(o,r){var i=e.getEntityAt(o);if(i){var s=n.getEntity(i);if(s&&"emoji"===s.getType())return}var a=c.SelectionState.createEmpty(e.getKey()).set("anchorOffset",o).set("focusOffset",r),u=t.substring(o,r),l=n.createEntity("emoji","IMMUTABLE",{emojiUnicode:u}).getLastCreatedEntityKey();n=c.Modifier.replaceText(n,a,u,void 0,l)}))}})),n.equals(t)?e:c.EditorState.push(e,n,"change-block-data")}(e);if(!t.getCurrentContent().equals(e.getCurrentContent())){var o=e.getSelection();t=c.EditorState.forceSelection(t,o)}return u.onChange?u.onChange(t):t}}}}}]);